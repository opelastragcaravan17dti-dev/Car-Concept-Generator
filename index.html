<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus AutoGen | Offline Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.344.0"
      }
    }
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: white; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState } from 'react';
        import { createRoot } from 'react-dom/client';
        import { Sparkles, Zap, Search, Target, DollarSign, Tag, Settings, TrendingUp, History, Trash2, Wind, Gauge, Disc, Cpu, Layers, FileText, Check, Copy, Terminal } from 'lucide-react';

        // --- PROCEDURAL DATA BANKS ---
        const DATA = {
            brands: ["Apex", "Vortex", "Zenith", "Cobalt", "Aether", "Nova", "Ion", "Spectre", "Titan", "Flux", "Rogue", "Echo", "Pulse", "Drift", "Onyx"],
            models: ["GT-X", "Phantom", "Wraith", "Viper", "Storm", "Blade", "Runner", "Prime", "Vector", "Matrix", "Cipher", "Shadow", "Ghost", "Fury"],
            styles: [
                { name: "Cyberpunk", desc: "Neon accents, sharp angles, exposed mechanics" },
                { name: "Minimalist", desc: "Seamless surfaces, hidden vents, pure form" },
                { name: "Industrial", desc: "Raw steel, utilitarian, brutalist geometry" },
                { name: "Retro-Future", desc: "Chrome details, bubble glass, 80s synthwave vibe" },
                { name: "Organic", desc: "Biomorphic shapes, flowing lines, nature-inspired" },
                { name: "Aggressive", desc: "Huge intakes, active aero, menacing stance" }
            ],
            colors: [
                { name: "Midnight Void", hex: "#1a1a1a" }, { name: "Ghost White", hex: "#f0f0f0" },
                { name: "Electric Blue", hex: "#2563eb" }, { name: "Molten Red", hex: "#dc2626" },
                { name: "Cyber Yellow", hex: "#facc15" }, { name: "Stealth Grey", hex: "#4b5563" },
                { name: "Toxic Green", hex: "#65a30d" }, { name: "Sunset Orange", hex: "#ea580c" }
            ],
            markets: [
                { target: "Hyper-Elites", vibe: "Exclusive status symbol" },
                { target: "Urban Commuters", vibe: "Efficient city mobility" },
                { target: "Track Enthusiasts", vibe: "Pure driving performance" },
                { target: "Eco-Conscious", vibe: "Sustainable luxury" },
                { target: "Explorers", vibe: "Rugged utility for any terrain" }
            ],
            features: [
                "Holographic Dash", "AI Co-Pilot", "Solar Roof", "Gullwing Doors", "Active Aero", 
                "Carbon Chassis", "Augmented HUD", "Drone Bay", "Bio-ID Entry", "Omni-Wheels"
            ]
        };

        // --- HELPER FUNCTIONS ---
        const randomItem = (arr) => arr[Math.floor(Math.random() * arr.length)];
        const randomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
        const formatCurrency = (val) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(val);

        // --- LOGIC ENGINE ---
        const generateCarLogic = (userBrand, userModel, userDesc) => {
            // 1. Determine Body Type
            const bodyTypes = ["Sedan", "SUV", "Coupe", "Truck", "Hatchback", "Supercar", "Wagon", "Minivan", "Off-Roader"];
            let bodyType = randomItem(bodyTypes);
            
            // Simple NLP to respect user input
            const inputLower = (userDesc + " " + userModel).toLowerCase();
            if (inputLower.includes("truck") || inputLower.includes("pickup")) bodyType = "Truck";
            else if (inputLower.includes("suv") || inputLower.includes("jeep")) bodyType = "SUV";
            else if (inputLower.includes("fast") || inputLower.includes("sport") || inputLower.includes("race")) bodyType = "Supercar";
            else if (inputLower.includes("family") || inputLower.includes("van")) bodyType = "Minivan";
            else if (inputLower.includes("city") || inputLower.includes("small")) bodyType = "Hatchback";

            // 2. Determine Powertrain
            const isEV = Math.random() > 0.4 || inputLower.includes("electric");
            const engine = isEV ? { type: "Dual-Motor Electric", fuel: "Electric" } : { type: "Twin-Turbo V8", fuel: "Petrol" };
            const transmission = isEV ? "Single-Speed Direct" : "8-Speed Dual Clutch";

            // 3. Calculate Stats based on Body & Engine
            let baseHp = isEV ? 400 : 300;
            let weight = 1500;
            
            if (bodyType === "Supercar") { baseHp = 800; weight = 1400; }
            else if (bodyType === "Truck") { baseHp = 450; weight = 2500; }
            else if (bodyType === "SUV") { baseHp = 350; weight = 2200; }
            else if (bodyType === "Hatchback") { baseHp = 200; weight = 1200; }

            const hp = baseHp + randomInt(-50, 150);
            const topSpeed = Math.min(250, Math.floor(hp / 3) + 50);
            const speed0to60 = (weight / hp * 1.8).toFixed(1);

            // 4. Visual Descriptions
            let visualPrompt = `modern ${bodyType.toLowerCase()} body style`;
            if (bodyType === "Supercar") visualPrompt = "low-slung aerodynamic wedge shape, wide aggressive stance";
            if (bodyType === "Truck") visualPrompt = "rugged utility chassis, open cargo bed, high ground clearance";
            
            // 5. Construct Object
            return {
                id: Date.now(),
                brand: userBrand || randomItem(DATA.brands),
                model: userModel || randomItem(DATA.models),
                year: 2025,
                price: randomInt(35, 150) * 1000,
                body: { type: bodyType, visualPrompt },
                engine,
                transmission,
                stats: { hp, topSpeed, speed0to60, weight },
                color: randomItem(DATA.colors),
                style: randomItem(DATA.styles),
                market: randomItem(DATA.markets),
                features: [randomItem(DATA.features), randomItem(DATA.features), randomItem(DATA.features)],
                logo: "Abstract geometric emblem"
            };
        };

        const generateMasterPrompt = (car) => {
            const isEV = car.engine.fuel === "Electric";
            const frontDetail = isEV ? "solid smooth body-colored nose, no grille" : "large radiator cooling grille";
            const rearDetail = isEV ? "clean diffuser, no tailpipes" : "dual exhaust pipes";
            const interiorDetail = isEV ? "minimalist dash, rotary selector" : "gear shifter, driver cockpit";

            return `**MASTER VISUAL PROMPT**

[SUBJECT]
Photorealistic concept car: ${car.year} ${car.brand} ${car.model}.
Paint: ${car.color.name}. Style: ${car.style.name} (${car.style.desc}).
Body Type: ${car.body.type}.

[SPECIFIC VIEWS]
1. FRONT: Direct head-on view. Symmetrical. ${frontDetail}. Custom hood emblem.
2. SIDE: Profile view showing silhouette, wheels, and body lines.
3. REAR: Direct rear view. Symmetrical. ${rearDetail}. Brand lettering on trunk.
4. INTERIOR: ${interiorDetail}. Leather seats. High-tech dashboard.

[RENDER SETTINGS]
8k resolution, Unreal Engine 5 style, studio lighting, neutral background, cinematic composition.`;
        };

        // --- COMPONENTS ---
        const StatBar = ({ label, value, max, color, icon: Icon }) => (
            <div className="mb-3">
                <div className="flex justify-between text-xs uppercase tracking-wider text-gray-400 mb-1">
                    <span className="flex items-center gap-2"><Icon size={14} />{label}</span>
                    <span className="text-white font-mono">{value}</span>
                </div>
                <div className="h-1.5 w-full bg-gray-800 rounded-full overflow-hidden">
                    <div className={`h-full ${color}`} style={{ width: `${Math.min(100, (parseFloat(value) / max) * 100)}%` }}></div>
                </div>
            </div>
        );

        const PromptCard = ({ prompt }) => {
            const [copied, setCopied] = useState(false);
            const copy = () => {
                navigator.clipboard.writeText(prompt);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };
            return (
                <div className="bg-slate-900 border border-slate-800 rounded-xl p-6 relative group hover:border-blue-500/30 transition-all">
                    <div className="flex justify-between items-center mb-4 border-b border-slate-800 pb-3">
                        <div className="flex items-center gap-2 text-blue-400 font-bold text-sm">
                            <Terminal size={16} /> PROMPT CONSOLE
                        </div>
                        <button onClick={copy} className={`text-xs px-3 py-1.5 rounded flex items-center gap-2 transition-colors ${copied ? 'bg-green-900/50 text-green-400' : 'bg-slate-800 text-slate-300 hover:bg-slate-700'}`}>
                            {copied ? <Check size={12}/> : <Copy size={12}/>} {copied ? "COPIED" : "COPY"}
                        </button>
                    </div>
                    <pre className="text-xs text-slate-400 font-mono whitespace-pre-wrap leading-relaxed">{prompt}</pre>
                </div>
            );
        };

        // --- MAIN APP ---
        function App() {
            const [car, setCar] = useState(null);
            const [history, setHistory] = useState([]);
            const [inputs, setInputs] = useState({ brand: "", model: "", desc: "" });
            const [prompt, setPrompt] = useState("");

            const handleBuild = (e) => {
                e.preventDefault();
                const newCar = generateCarLogic(inputs.brand, inputs.model, inputs.desc);
                const newPrompt = generateMasterPrompt(newCar);
                
                setCar(newCar);
                setPrompt(newPrompt);
                setHistory(prev => [newCar, ...prev].slice(0, 5));
            };

            const loadFromHistory = (hCar) => {
                setCar(hCar);
                setPrompt(generateMasterPrompt(hCar));
            };

            return (
                <div className="min-h-screen pb-12">
                    {/* Header */}
                    <header className="border-b border-slate-800 bg-slate-900/50 backdrop-blur sticky top-0 z-50">
                        <div className="max-w-6xl mx-auto px-4 py-4 flex items-center gap-3">
                            <div className="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-blue-500/20"><Sparkles size={18} /></div>
                            <h1 className="text-xl font-bold text-white tracking-tight">AUTO<span className="text-blue-500">GEN</span> <span className="text-slate-600 font-mono text-sm ml-2">OFFLINE MODE</span></h1>
                        </div>
                    </header>

                    <main className="max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8">
                        
                        {/* Left Column: Controls & Display */}
                        <div className="lg:col-span-8 space-y-6">
                            
                            {/* Input Panel */}
                            <div className="bg-slate-900 border border-slate-800 p-5 rounded-2xl shadow-xl">
                                <form onSubmit={handleBuild} className="space-y-3">
                                    <div className="flex gap-3">
                                        <input placeholder="Brand (Optional)" value={inputs.brand} onChange={e => setInputs({...inputs, brand: e.target.value})} className="w-1/3 bg-slate-950 border border-slate-800 rounded-lg px-4 py-3 text-sm focus:border-blue-500 outline-none transition-colors" />
                                        <input placeholder="Model (Optional)" value={inputs.model} onChange={e => setInputs({...inputs, model: e.target.value})} className="w-1/3 bg-slate-950 border border-slate-800 rounded-lg px-4 py-3 text-sm focus:border-blue-500 outline-none transition-colors" />
                                        <button type="submit" className="w-1/3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-bold text-sm transition-all shadow-lg shadow-blue-900/20 active:scale-95 flex items-center justify-center gap-2">
                                            <Cpu size={16} /> ENGINEER
                                        </button>
                                    </div>
                                    <div className="relative">
                                        <div className="absolute left-4 top-3.5 text-slate-500"><Search size={18} /></div>
                                        <input placeholder="Directives (e.g. 'V12 Hypercar', 'Electric City Pod')" value={inputs.desc} onChange={e => setInputs({...inputs, desc: e.target.value})} className="w-full bg-slate-950 border border-slate-800 rounded-lg pl-12 pr-4 py-3 text-sm focus:border-blue-500 outline-none transition-colors" />
                                    </div>
                                </form>
                            </div>

                            {/* Results Area */}
                            {car ? (
                                <div className="animate-fade-in space-y-6">
                                    {/* Header */}
                                    <div className="flex justify-between items-end border-b border-slate-800 pb-4">
                                        <div>
                                            <div className="flex items-center gap-2 text-blue-500 font-bold text-xs mb-1"><Tag size={12}/> {car.year} CONCEPT</div>
                                            <h2 className="text-4xl font-black text-white tracking-tight">{car.brand} {car.model}</h2>
                                            <p className="text-slate-400">{car.style.name} {car.body.type}</p>
                                        </div>
                                        <div className="text-right">
                                            <div className="text-xs text-slate-500 font-bold mb-1">ESTIMATED MSRP</div>
                                            <div className="text-3xl font-mono text-green-400">{formatCurrency(car.price)}</div>
                                        </div>
                                    </div>

                                    {/* Visualizer Prompt */}
                                    <PromptCard prompt={prompt} />

                                    {/* Specs Grid */}
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div className="bg-slate-900/50 border border-slate-800 p-6 rounded-xl">
                                            <h3 className="text-xs font-bold text-slate-500 mb-4 flex items-center gap-2"><TrendingUp size={14}/> PERFORMANCE</h3>
                                            <StatBar label="Power" value={`${car.stats.hp} HP`} max={1500} color="bg-blue-600" icon={Zap} />
                                            <StatBar label="Top Speed" value={`${car.stats.topSpeed} MPH`} max={400} color="bg-indigo-500" icon={Wind} />
                                            <StatBar label="0-60 MPH" value={`${car.stats.speed0to60}s`} max={10} color="bg-emerald-500" icon={Gauge} />
                                            <StatBar label="Weight" value={`${car.stats.weight}kg`} max={4000} color="bg-slate-500" icon={Disc} />
                                        </div>

                                        <div className="space-y-6">
                                            <div className="bg-slate-900/50 border border-slate-800 p-6 rounded-xl">
                                                <h3 className="text-xs font-bold text-slate-500 mb-4 flex items-center gap-2"><Settings size={14}/> CONFIGURATION</h3>
                                                <div className="space-y-3 text-sm">
                                                    <div className="flex justify-between border-b border-slate-800 pb-2">
                                                        <span className="text-slate-400">Engine</span>
                                                        <span className="text-white">{car.engine.type}</span>
                                                    </div>
                                                    <div className="flex justify-between border-b border-slate-800 pb-2">
                                                        <span className="text-slate-400">Fuel</span>
                                                        <span className="text-white">{car.engine.fuel}</span>
                                                    </div>
                                                    <div className="flex justify-between border-b border-slate-800 pb-2">
                                                        <span className="text-slate-400">Trans</span>
                                                        <span className="text-white">{car.transmission}</span>
                                                    </div>
                                                    <div className="flex justify-between pt-1">
                                                        <span className="text-slate-400">Paint</span>
                                                        <span className="text-white flex items-center gap-2"><div className="w-3 h-3 rounded-full" style={{background: car.color.hex}}></div> {car.color.name}</span>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <h3 className="text-xs font-bold text-slate-500 mb-3 flex items-center gap-2"><Layers size={14}/> FEATURES</h3>
                                                <div className="flex flex-wrap gap-2">
                                                    {car.features.map((f, i) => (
                                                        <span key={i} className="px-2 py-1 bg-slate-800 border border-slate-700 rounded text-[10px] text-slate-300">{f}</span>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <div className="h-96 flex flex-col items-center justify-center text-center opacity-40">
                                    <Sparkles size={64} className="text-slate-600 mb-6" />
                                    <h2 className="text-3xl font-bold text-white mb-2">Ready to Engineer</h2>
                                    <p className="text-slate-400 max-w-md">Enter parameters above to generate a unique vehicle concept with full specifications and visual prompts.</p>
                                </div>
                            )}
                        </div>

                        {/* Right Column: History */}
                        <div className="lg:col-span-4">
                            <div className="bg-slate-900 border border-slate-800 rounded-2xl p-5 h-full min-h-[500px] flex flex-col">
                                <div className="flex justify-between items-center mb-6 border-b border-slate-800 pb-4">
                                    <h3 className="font-bold text-slate-300 flex items-center gap-2"><History size={16}/> PROJECT HISTORY</h3>
                                    {history.length > 0 && <button onClick={() => setHistory([])} className="text-xs text-red-400 hover:text-red-300 flex items-center gap-1"><Trash2 size={12}/> Clear</button>}
                                </div>
                                <div className="space-y-3 overflow-y-auto flex-1">
                                    {history.map(hCar => (
                                        <div key={hCar.id} onClick={() => loadFromHistory(hCar)} className={`p-4 rounded-xl border cursor-pointer transition-all ${currentCar?.id === hCar.id ? 'bg-blue-900/20 border-blue-500/50' : 'bg-slate-950 border-slate-800 hover:border-slate-600'}`}>
                                            <div className="flex justify-between mb-1">
                                                <span className="font-bold text-white text-sm">{hCar.brand} {hCar.model}</span>
                                                <span className="text-xs text-green-400 font-mono">{formatCurrency(hCar.price)}</span>
                                            </div>
                                            <div className="text-xs text-slate-500">{hCar.year} {hCar.body.type}</div>
                                        </div>
                                    ))}
                                    {history.length === 0 && <div className="text-center text-slate-600 py-12 text-xs">No projects in database.</div>}
                                </div>
                            </div>
                        </div>

                    </main>
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


